<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LIGHTRI ‚Äî Fiches compl√®tes avec cartes</title>
<style>
body{font-family:system-ui, sans-serif;background:#f8f9fb;color:#111;margin:0;padding:20px}
h1{margin-bottom:8px}
textarea,input,button{font-size:15px;font-family:inherit}
textarea{width:100%;height:160px;padding:10px;border-radius:8px;border:1px solid #ccc;resize:vertical;margin-bottom:12px}
button{padding:8px 12px;border-radius:8px;border:1px solid #999;cursor:pointer;background:#fff;margin-right:6px}
button:hover{background:#f2f2f2}
.note{font-size:13px;color:#666;margin-bottom:12px}
#cardsGrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:12px;margin-top:16px}
.cardWrap{background:#fff;border-radius:10px;padding:10px;border:1px solid #e6e6e6}
.info{font-size:13px;white-space:pre-wrap;margin-top:8px;color:#444}
a.linkImg{display:inline-block;margin-bottom:6px;color:#0b66ff;font-size:13px}
</style>
</head>
<body>
<h1>üí≥ LIGHTRI ‚Äî Fiches compl√®tes avec cartes</h1>
<div class="note">Colle tes fiches ou charge un fichier .txt. Chaque fiche : CardNumber|MM|YYYY|CVV|BankField|FullName|Address|City|Region|Zip|Phone|Email</div>
<div>
<input type="file" id="file" accept=".txt"/>
<button id="process">Traiter</button>
<button id="download">T√©l√©charger</button>
<button id="loadExample">Exemple</button>
</div>
<textarea id="input" placeholder="Colle ici ton texte brut..."></textarea>
<div id="cardsGrid"></div>

<script>
/* --------------------------
  500+ BIN fictifs pour France
--------------------------- */
const LOCAL_BINS=(function(){
const banks=["BNP Paribas","Soci√©t√© G√©n√©rale","Cr√©dit Agricole","La Banque Postale","Caisse d'√âpargne","Cr√©dit Mutuel"];
const levels=["Classic","Gold","Platinum"];
const types=["Credit","Debit"];
const schemes=["Visa","MasterCard"];
const bins={};
let idx=0;
for(let b=0;b<banks.length;b++){
for(let s=0;s<schemes.length;s++){
for(let l=0;l<levels.length;l++){
for(let t=0;t<types.length;t++){
for(let n=0;n<15;n++){
const bin=(500000+idx).toString();
bins[bin]={
bank:banks[b],
card:schemes[s],
type:types[t],
level:levels[l],
country:"France",
countrycode:"FR",
nearest_branch:{
name:banks[b]+" agence "+(n+1),
address:(100+n)+" Rue Exemple, 7500"+n+" Paris",
distance:(0.1+n*0.3).toFixed(1)+" km"
}
};
idx++;
if(idx>500) break;
}
if(idx>500) break;
}
if(idx>500) break;
}
if(idx>500) break;
}
return bins;
})();

/* Helpers */
function digitsOnly(s){return(s||'').replace(/\D/g,'');}
function groupCard(n){return digitsOnly(n).replace(/(\d{4})(?=\d)/g,'$1 ');}
function pickBinInfo(bin){return LOCAL_BINS[bin]||null;}
function inferScheme(n){if(/^4/.test(n)) return "Visa"; if(/^5[1-5]/.test(n)) return "MasterCard"; return "Visa";}

function buildCardPage(carte,binInfo){
const scheme=binInfo?binInfo.card:inferScheme(carte.CardNumber);
const svg=`<svg xmlns="http://www.w3.org/2000/svg" width="600" height="340">
<rect width="600" height="340" rx="24" fill="#eee"/>
<text x="300" y="160" font-size="40" text-anchor="middle" fill="#333">${scheme}</text>
<text x="300" y="200" font-size="28" text-anchor="middle" fill="#111">${groupCard(carte.CardNumber)}</text>
</svg>`;
const blob=new Blob([svg],{type:"image/svg+xml"});
return URL.createObjectURL(blob);
}

function formatFullInfo(carte,binInfo){
const b=binInfo||{};
return `Nom : ${carte.FullName}
Adresse : ${carte.Address}, ${carte.City} (${carte.City2||''}) ${carte.Zip}
T√©l√©phone : ${carte.Phone}
Email : ${carte.Email}

Carte :
Num√©ro : ${groupCard(carte.CardNumber)}
BIN : ${carte.BIN}
Expiration : ${carte.ExpMonth}/${carte.ExpYear}
CVV : ${carte.CVV}
R√©seau : ${b.card||inferScheme(carte.CardNumber)}
Banque : ${b.bank||'Non sp√©cifi√©'}
Niveau : ${b.level||'Non sp√©cifi√©'}
Type : ${b.type||'Non sp√©cifi√©'}
Agence la plus proche : ${b.nearest_branch?b.nearest_branch.name+' ('+b.nearest_branch.distance+')':''}
Adresse agence : ${b.nearest_branch?b.nearest_branch.address:''}`;
}

function createCardEntry(carte,binInfo){
const wrap=document.createElement('div'); wrap.className='cardWrap';
const link=document.createElement('a'); link.className='linkImg';
link.href=buildCardPage(carte,binInfo);
link.target='_blank';
link.textContent='Ouvrir l‚Äôimage de la carte (verso)';
const info=document.createElement('div'); info.className='info';
info.textContent=formatFullInfo(carte,binInfo);
wrap.appendChild(link); wrap.appendChild(info);
document.getElementById('cardsGrid').appendChild(wrap);
}

async function processText(text){
const lines=text.split(/\r?\n/).map(l=>l.trim()).filter(Boolean).filter(l=>l.includes('|'));
document.getElementById('cardsGrid').innerHTML='';
for(let i=0;i<lines.length;i++){
const parts=lines[i].split('|').map(p=>p.trim());
while(parts.length<12) parts.push('');
const carte={
CardNumber: parts[0],
ExpMonth: parts[1],
ExpYear: parts[2],
CVV: parts[3],
BankField: parts[4],
FullName: parts[5],
Address: parts[6],
City: parts[7],
City2: parts[8],
Zip: parts[9],
Phone: parts[10],
Email: parts[11]
};
carte.BIN=digitsOnly(carte.CardNumber).slice(0,6);
const binInfo=pickBinInfo(carte.BIN);
createCardEntry(carte,binInfo);
}
}

/* Events */
document.getElementById('process').addEventListener('click',()=>{ 
const t=document.getElementById('input').value.trim();
if(t) processText(t);
else alert("Colle ton texte ou ajoute un fichier .txt");
});

document.getElementById('loadExample').addEventListener('click',()=>{
document.getElementById('input').value=`5539791646892300 | 12 | 2025 | 257 | FRANCE | Kelly Yang | 23 Rue Paul Auster | Thiais | Val-de-Marne | 94320 | 0652894389 | kellyyang@outlook.fr
5133791059685621 | 02 | 2026 | 500 | FRANCE | Dicanot | 42 boulevard Dubreuil | BuressurYvette | Essonne | 91440 | 0782714931 | idicanot@gmail.com
4970407109386230 | 01 | 2026 | 116 | FRANCE | Remi Vallette | 18 avenue linn | Savigny sur orge | Savigny sur orge | 91600 | 0684204360 | remi.vallette@gmail.com
5137707170853795 | 09 | 2026 | 246 | FRANCE | Auguste F Gosselin | 39 Place du Jeu de Paume | VILLEJUIF | Ile-de-France | 94800 | 443824-7792 | xmasmom4@yahoo.com`;
});

document.getElementById('download').addEventListener('click',()=>{
const blocks=Array.from(document.querySelectorAll('.info')).map(e=>e.textContent);
if(blocks.length===0){alert('Rien √† t√©l√©charger'); return;}
const blob=new Blob([blocks.join('\n\n')],{type:'text/plain'});
const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='lightri_full_fiches.txt'; document.body.appendChild(a); a.click(); a.remove();
});

document.getElementById('file').addEventListener('change',async(e)=>{
if(e.target.files.length>0){
const text=await e.target.files[0].text();
document.getElementById('input').value=text;
processText(text);
}
});
</script>
</body>
</html>